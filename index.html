<html>
    <head>
        <script src="https://use.fontawesome.com/a0e556e899.js"></script>
        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.1/css/all.css" integrity="sha384-vp86vTRFVJgpjF9jiIGPEEqYqlDwgyBgEF109VFjmqGmIY/Y4HV4d3Gp2irVfcrp" crossorigin="anonymous">
        <script src="https://code.jquery.com/jquery-2.0.3.js" integrity="sha256-lCf+LfUffUxr81+W0ZFpcU0LQyuZ3Bj0F2DQNCxTgSI=" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/konva/7.2.2/konva.min.js" integrity="sha512-zbpQ5DaXc34MZEg81DJZSHALTkKr1+eOspsa01J4FSVqhUHjCa/V1xvur7imE4UZcj40uYDIR21MEpxzG2OHvw==" crossorigin="anonymous"></script>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">
        <link href="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.19.1/css/mdb.min.css" rel="stylesheet">
        <link rel="stylesheet" href="./resources/style/style.css">
    </head>

    <body>
    <div class="header">
        <div className="landing">
            <div class="dark-overlay">
                <div class="landing-inner">
                    <h1 class="x-large"></span>Welcome to BioWeb - Visualization Interactive Tool</h1>
                    <p class="lead">Interactive Heatmaps for biological research</p>
                </div>
            </div>
        </div>
        
    </div>
    <div class="table-container">
        <div class="column2">
            <p id ="headline1" style="margin-left:2rem;" class="headline">First data Heatmap</p>
            <div id="table-box-connect-1to2" class="table-box-connect-1to2">
                <table class="table table-sm" id="table-connect-1to2">
                    <thead>
                      <tr class="table-info">
                        <th>miRNA</th>
                        <th>Gene Target</th>
                        <th>Action</th>
                      </tr>
                    </thead>
                  </table>
            </div>
            <div id="ml1" class="ml">
                <button id="preprocess1" type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal">
                    Generate
                </button>
                <button id='clear-tb1' type="button" class="btn btn-primary">CLEAR</button>
            </div>
        </div>
        <div class="column2">
            <p id ="headline2" class="headline" style="margin-left:5rem;">Second data Heatmap</p>
            <div id="table-box-connect-2to1" class="table-box-connect-1to2">
                <table class="table table-sm" id="table-connect-2to1">
                    <thead>
                      <tr class="table-info">
                        <th>Gene Target</th>
                        <th>miRNA</th>
                        <th>Action</th>
                      </tr>
                    </thead>
                  </table>
            </div>
            <div id="ml2" class="ml">
                <button id="preprocess2" type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal">
                    Generate
                </button>
                <button id='clear-tb2' type="button" class="btn btn-primary">CLEAR</button>
            </div>
        </div>
    </div>



    <div   id="two_maps" style="justify-content: space-around; display: flex; " >
        <div>
            <div  id='inchlib1' ></div>
            <button style="display: none" id="downoad_map1">Download Map</button>
        </div>
        <div>
             <div  id='inchlib2' ></div>
             <button style="display: none"  id="downoad_map2">Download Map</button>
        </div>
    </div>


<div class="one_map_container">
    <div class="uniquiehm" id='inchlib' ></div>
    <button style="display: none;" id="downoad_map">Download Map</button>
</div>




    <div class="form-container">
  
            <p>Your tab-separated matrix file should be in one of the supported matrix formats (see examples below) and have .csv file extension.</p>
            <div class="code">compoundid,1x10-5 mol.dm-3,1x10-4 mol.dm-3, 1x10-3 mol.dm-3
13736,6.675,5.932,4.799
13738,4.482,10.458,5.682
13548,2.43,2.478,8.649
7889,-1.0,2.244,60.017
10701,-0.23,-2.189,13.679
            </div>
            <p>For connectioms file use this format:</p>
            <div class="code">src,target
mir1 ,gen1
mir1,gen2
mir2,gen1
mir2,gen3
            </div>
            <p>Example file for you data you can find here:<a href="https://www.openscreen.cz/software/inchlib/static/source_data/example_data.csv" target="blank">Whole data file</a></p>
    </div>
 
<hr class="my-4">    

<!-- ALL FORMS -->

<div class="form-group row">
    <div class="col-sm-6">
        <input id="checkbox-loading-files-choose" type="checkbox" class="form-check-input" style="margin-bottom: 1rem;">
        <label id="use">Load Existing Settings</label>
    </div>
</div>

<div id="form-exist" style="display: none;">
    <p style="font-weight:bold">Load Files</p>
        <div class="row">
            <div class="col-md-10 ">   
                <form id="loadSettings"> 
                    <div class="form-group row">
                        <div class="col-sm-6">
                            <input id="map2-loading" type="checkbox" class="form-check-input" style="margin-bottom: 1rem;">
                            <label id="use">Load 2 Maps</label>
                        </div>
                        <div class="form-group row">
                            <div class="col-sm-6">
                                <label>Load First Data</label>
                                <input type="file" id="map1" class="form-control" style="width:60%" />
                            </div>
                            <div class="col-sm-6" id="map2-input" style="display:none">
                                <label>Load Second Data</label>
                                <input type="file" class="form-control" id="map2" style= "width:60%" />
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-6">
                        <p id="error-message-exists">&nbsp;</p>
                        <input id="button_exists" type="submit" class="btn btn-primary"></input>
                    </div>
                </form>
            </div>
        </div> 
</div>

<div id="form-new">

<p style="font-weight:bold">Settings</p>
    <div class="row">
        <div class="col-md-10 ">   
            <form id="myDefForm"> 
                <div class="form-group row">
                    <div class="col-sm-6">
                        <input id="checkbox-maps-choose" type="checkbox" class="form-check-input" style="margin-bottom: 1rem;">
                        <label id="use">For one heatmap</label>
                    </div>
                </div>
                <div class="form-group row">
                    <div class="col-sm-6">
                            <label>Load First Data</label>
                            <input type="file" id="mirNA" class="form-control" style="width:60%" />
                            <input id="checkbox-meta-data1" type="checkbox" class="form-check-input" style="margin-bottom: 15px;">
                            <label id="use">add Meta-data</label>
                    </div>
                    <div class="col-sm-6" id="checkbox-mirNA-metadata-option" style="display:none">
                        <label>Load First Meta Data</label>
                        <input type="file" class="form-control" id="mirNA-metadata" style= "width:60%" />
                    </div>
                </div>
                <div class="form-group row">
                    <div class="col-sm-6" id="checkbox-target-metadata-op">
                        <label>Load Second Data</label>
                        <input type="file" id="target" class="form-control" style="width:60%" />
                        <input id="checkbox-meta-data2" type="checkbox" class="form-check-input" style="margin-bottom: 15px;">
                        <label id="use">add Meta-data</label>
                    </div>
                    <div class="col-sm-6" id="checkbox-target-metadata-option" style="display:none;">
                        <label>Load Second Meta Data </label>
                        <input type="file" class="form-control" id="target-metadata" style= "width:60%;"/>
                    </div>
                </div>
                <div class="form-group row" style="margin-bottom:3rem">
                    <div class="col-sm-6" id="connections">
                        <label >Load Connections Data</label>
                        <input type="file" class="form-control" id="connection" style="width:60%" />
                    </div>
                </div>

                <!--FIRST HEATMAP CLUSTERING-->
                <div class="form-group row ">
                    <div class="col-sm-6">
                        <label style="font-weight:bold">Choose Cluster</label>
                        <br><br>
                        <label style="font-weight:bold">First HeatMap</label>
                        <br><br>
                    </div>
                </div>
                <div class="form-group row ">
                    <div class="col-sm-6">
                        <div class="col-sm-6">
                            <label>Choose Fisrt Data Cluster</label>
                                <select class="form-control" id="miRNA-clust-select" style="width:60%">
                                    <option>Rows</option>
                                    <option>Both</option>
                                </select>
                        </div>
                    </div>
                </div>
                <div class="form-group row ">
                    <div class="col-sm-6">
                        <label>Choose Linkage Type</label>
                            <select class="form-control" id="linkage-select" style="width:60%">
                                <option>Single</option>
                                <option>Complete</option>
                                <option>Average</option>
                                <option>Centroid</option>
                                <option>Ward</option>
                                <option>Median</option>
                                <option>Weighted</option>
                            </select>
                    </div>
                    <div class="col-sm-6" id='mir-linkage-column' style="display: none;">
                        <label>Choose Column Linkage Type</label>
                            <select class="form-control" id="linkage-select-column" style="width:60%">
                                <option>Single</option>
                                <option>Complete</option>
                                <option>Average</option>
                                <option>Centroid</option>
                                <option>Ward</option>
                                <option>Median</option>
                                <option>Weighted</option>
                            </select>
                    </div>
                </div>
                <div class="form-group row ">
                    <div class="col-sm-6">
                        <label for="exampleFormControlSelect1">Choose Distance Type</label>
                            <select class="form-control" id="distance-select" style="width:60%">
                                <option>Canberra</option>
                                <option>Complete</option>
                                <option>Cosine</option>
                                <option>Correlation</option>
                                <option>Mahalanobis</option>
                                <option>Seuclidean</option>
                                <option>Cityblock</option>
                                <option>Chebyshev</option>
                                <option>Euclidean</option>
                                <option>Sqeuclidean</option>
                            </select>
                    </div>
                    <div class="col-sm-6" id='mir-distance-column' style="display: none;"> 
                        <label for="exampleFormControlSelect1">Choose Column Distance Type</label>
                            <select class="form-control" id="distance-select-column" style="width:60%">
                                <option>Canberra</option>
                                <option>Complete</option>
                                <option>Cosine</option>
                                <option>Correlation</option>
                                <option>Mahalanobis</option>
                                <option>Seuclidean</option>
                                <option>Cityblock</option>
                                <option>Chebyshev</option>
                                <option>Euclidean</option>
                                <option>Sqeuclidean</option>
                            </select> 
                    </div>
                </div>

                <!-- <hr class="my-4">     -->
                <br>

                <!--SECOND HEATMAP CLUSTERING-->
            <div id="secondheatmapssettings" >
                <div class="form-group row">
                    <div class="col-sm-6">
                        <label style="font-weight:bold">Second HeatMap</label>
                        <br><br>
                    </div>
                </div>
                <div class="form-group row ">
                    <div class="col-sm-6">
                        <div class="col-sm-6">
                            <label>Choose Second Data Cluster</label>
                                <select class="form-control" id="target-clust-select" style="width:60%">
                                    <option>Rows</option>
                                    <option>Both</option>
                                </select>
                        </div>
                    </div>
                </div>
                <div class="form-group row ">
                    <div class="col-sm-6" id='tgt-linkage-column' style="display: none;">
                        <label>Choose Linkage Type</label>
                            <select class="form-control" id="linkage-select2" style="width:60%">
                                <option>Single</option>
                                <option>Complete</option>
                                <option>Average</option>
                                <option>Centroid</option>
                                <option>Ward</option>
                                <option>Median</option>
                                <option>Weighted</option>
                            </select>
                    </div>
                    <div class="col-sm-6">
                        <label>Choose Column Linkage Type</label>
                            <select class="form-control" id="linkage-select-column2" style="width:60%">
                                <option>Single</option>
                                <option>Complete</option>
                                <option>Average</option>
                                <option>Centroid</option>
                                <option>Ward</option>
                                <option>Median</option>
                                <option>Weighted</option>
                            </select>
                    </div>
                </div>
                <div class="form-group row ">
                    <div class="col-sm-6">
                        <label for="exampleFormControlSelect1"> Distance Type</label>
                            <select class="form-control" id="distance-select2" style="width:60%">
                                <option>Canberra</option>
                                <option>Complete</option>
                                <option>Cosine</option>
                                <option>Correlation</option>
                                <option>Mahalanobis</option>
                                <option>Seuclidean</option>
                                <option>Cityblock</option>
                                <option>Chebyshev</option>
                                <option>Euclidean</option>
                                <option>Sqeuclidean</option>
                            </select>
                    </div>
                    <div class="col-sm-6" id='tgt-distance-column' style="display: none;">
                        <label for="exampleFormControlSelect1">Choose Distance Type</label>
                            <select class="form-control" id="distance-select-column2" style="width:60%">
                                <option>Canberra</option>
                                <option>Complete</option>
                                <option>Cosine</option>
                                <option>Correlation</option>
                                <option>Mahalanobis</option>
                                <option>Seuclidean</option>
                                <option>Cityblock</option>
                                <option>Chebyshev</option>
                                <option>Euclidean</option>
                                <option>Sqeuclidean</option>
                            </select> 
                    </div>
                </div>
            </div>
                <div class="col-sm-6">
                    <p id="error-message">&nbsp;</p>
                    <input id="buttonid" type="submit" class="btn btn-primary"></input>
                    <div id="spinner" class="spinner-border text-muted" style="margin-left:35px; display: flex;"></div>
                </div>
            </form>
        </div>
    </div>
</div>




<hr class="my-4">    



  <!-- Modal -->
  
  <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content" style=width:100%>
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">Preprocess</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="row">
            <div class="col">   
                <form style="margin-left: 1rem;">
                    <div class="form-group row ">
                            <div class="col">
                                <label>Choose Second Data Cluster</label>
                                    <select class="form-control" id="target-clust-select-manipul" style="width:40%">
                                        <option>Rows</option>
                                        <option>Both</option>
                                    </select>
                            </div>
                            <div class="col">
                                <label>Choose Action</label>
                                    <select class="form-control" id="action" style="width:60%">
                                        <option>Intersection</option>
                                        <option>Union</option>
                                    </select>
                            </div>
                    </div>
                    <div class="form-group row ">
                        <div class="col-sm-6">
                            <label>Choose Linkage Type</label>
                                <select class="form-control" id="linkage-select-manipulate" style="width:60%">
                                    <option>Single</option>
                                    <option>Complete</option>
                                    <option>Average</option>
                                    <option>Centroid</option>
                                    <option>Ward</option>
                                    <option>Median</option>
                                    <option>Weighted</option>
                                </select>
                        </div>
                        <div class="col-sm-6" id='mir-linkage-column-manipulate' style="display: none;">
                            <label>Choose Column Linkage Type</label>
                                <select class="form-control" id="linkage-select-column-manipulate" style="width:60%">
                                    <option>Single</option>
                                    <option>Complete</option>
                                    <option>Average</option>
                                    <option>Centroid</option>
                                    <option>Ward</option>
                                    <option>Median</option>
                                    <option>Weighted</option>
                                </select>
                        </div>
                    </div>
                    <div class="form-group row">
                        <div class="col">
                            <label for="exampleFormControlSelect1"> Distance Type</label>
                                <select class="form-control" id="distance-select2-manipulate" style="width:40%">
                                    <option>Canberra</option>
                                    <option>Complete</option>
                                    <option>Cosine</option>
                                    <option>Correlation</option>
                                    <option>Mahalanobis</option>
                                    <option>Seuclidean</option>
                                    <option>Cityblock</option>
                                    <option>Chebyshev</option>
                                    <option>Euclidean</option>
                                    <option>Sqeuclidean</option>
                                </select>
                        </div>
                        <div class="col" id='tgt-distance-column-manipulate' style="display: none;">
                            <label for="exampleFormControlSelect1">Choose Distance Type</label>
                                <select class="form-control" id="distance-select-column2-manipulate" style="width:60%">
                                    <option>Canberra</option>
                                    <option>Complete</option>
                                    <option>Cosine</option>
                                    <option>Correlation</option>
                                    <option>Mahalanobis</option>
                                    <option>Seuclidean</option>
                                    <option>Cityblock</option>
                                    <option>Chebyshev</option>
                                    <option>Euclidean</option>
                                    <option>Sqeuclidean</option>
                                </select> 
                        </div>
                    </div>
                </form>
            </div>
        </div>
        <div class="modal-footer">
            <button type="button"  class="btn btn-secondary" data-dismiss="modal">Close</button>
            <button id='mainuplate-data' type="button" class="btn btn-primary">Generate</button>
        </div>
      </div>
     </div>
  </div>
 
  
   <!-- connection -->
  
   <div class="modal fade" id="connection-dialog" tabindex="-1" role="dialog" aria-labelledby="connection-dialogLabel" aria-hidden="true">
    <div class="modal-dialog" role="document" style="width: 600px;">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="connection-dialogLabel">Connection details</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div style="margin:auto;" class="modal-body">
            <div class="column_connection_list">
                <label>Cluster:</label>
                <br>
                <label id="connection_list">No targes has found</label>

            </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>



<div class="modal fade" id="deseqModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">Deseq</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
            <div class="deseq">
                <div class="vertical_menu">
                            <a href="#upload-data" class="active">Upload data</a>          
                            <a href="#deseq_analysis">Deseq analysis</a>
                            <a href="#deseq_volcano_plot">Volcano plot</a>
                </div>
                <div class="Deseq_analysis">
                    <h3 id="upload-data">Upload data </h3>
                    <p id="deseq_instructions">
                        To perform deseq analysis, you must first upload the relevent files for the server.<br>
                        1. count matrix - csv file contains the quantity for each sample and gene.<br>
                        2. design matrix - csv file contains the conditions for each sample.<br>
                        you can view sample files under the data format tab.<br>
                    </p>
                    <div id ="data_format">
                        <h4>Data format</h4>
                        <div id='count_matrix_example'>
                            <p>
                            <b>Count matrix :</b> <br>
                            You can select any name for the id column, but you will need to pass the name as a parameter 
                            in the next phases.<br> In the example the id column is - id.
                            </p>
                            <img src="./resources/count_matrix_example.JPG">
                        </div>
                        <div id='design_matrix_example'>
                            <p>
                            <b>Design matrix :</b> <br> 
                            You can select any name for the id column, but you will need to pass the name as a parameter 
                            in the next phases.<br> In the example the id column is - sample_id.
                            </p>
                            <img src="./resources/design_matrix_example.JPG">
                        </div>
                        <div id="deseq_upload_data">
                            <form id ="files_data_deseq" >
                                <label>Load count matrix data</label><br>
                                <input type="file" class="form-control" id="count_matrix_data" style="width:60%" /><br>
                                <label>Load design matrix data</label><br>
                                <input type="file" class="form-control" id="design_matrix_data" style="width:60%" /><br>
                                <input type="submit" value="Upload data">
                            </form>
                        </div>    
                    </div>
                </div>
                <div id="deseq_analysis">
                    <h4>Deseq Analysis</h4>
                    <form id="deseq_form">
                        <label for="count_matrix">Count matrix file name:</label><br>
                        <input type="text" id="count_matrix" name="count_matrix" placeholder="count_matrix_example.csv" required><br>
                        <label for="count_matrix_id">Count_matrix column ID:</label><br>
                        <input type="text" id="count_matrix_id" name="count_matrix_id" placeholder="count_matrix_id" required><br>
                        <label for="design_matrix">Design matrix file name:</label><br>
                        <input type="text" id="design_matrix" name="design_matrix"  placeholder="design_matrix_example.csv" required><br>
                        <label for="design_matrix_id">Design matrix column ID:</label><br>
                        <input type="text" id="design_matrix_id" name="design_matrix_id" placeholder="design_matrix_id" required><br>
                        <input type="submit" value="Run Deseq analysis">
                        <input type="reset" value="Reset">
                    </form>
                </div>

                <div id="deseq_volcano_plot">
                    <h4>Deseq Volcano plot</h4>
                    <p id="vp_instructions">
                        To create an interactive volcano plot it is necessary to run a deseq analysis first or<br>
                        upload a suitable file first.<br>
                        If you performed deseq analysis first, the result are stored under the name deseq_result.csv,<br>
                        the file contains the following columns - id, baseMean, log2FoldChange,	lfcSE, stat, pvalue, padj.<br>
                        params:<br>
                            x/y operation - What operation to take on the data in the appropriate column.<br>
                            x/y threshold - A positive number greater than zero.<br>
                    </p>
                    <form id="volcano_form">
                        <label for="data_file">Data file:</label><br>
                        <input type="text" id="data_file" name="data_file" value="deseq_result.csv" required><br>
                        <label for="x_column">x column :</label><br>
                        <input type="text" id="x_column" name="x_column"  placeholder="x_column" required><br>
                        <label for="x_operation">x operation</label>
                        <select id="x_operation" name="x_operation" >
                            <option value="none">None</option>
                            <option value="log">Log</option>
                        </select><br>
                        <label for="x_threshold">x threshold:</label><br>
                        <input type="text" id="x_threshold" name="x_threshold" placeholder="0.05" required><br>
                        <label for="y_column">y column :</label><br>
                        <input type="text" id="y_column" name="y_column"  placeholder="y_column" required><br>
                        <label for="y_operation">y operation</label><br>
                        <select id="y_operation" name="y_operation">
                            <option value="none">None</option>
                            <option value="log">Log</option>
                        </select><br>
                        <label for="y_threshold">y threshold:</label><br>
                        <input type="text" id="y_threshold" name="y_threshold" placeholder="0.05"><br>
                        <input type="submit" value="create volcano plot">
                        <input type="reset" value="Reset">
                    </form>
                </div>
                <div id='plot'></div>
            </div>	
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>

  <div>
    <div class="form-group row">
        <div class="col-sm-6">
            <label style="font-weight:bold">For Deseq option: </label>
            <br><br>
        </div>
    </div>
        <button id='deseq-button' type="button"  data-toggle="modal" class="btn btn-primary" data-target="#deseqModal">Deseq</button>    
    </div> 

</div>
    </body>
    <script type="text/javascript" src="./components/insertable.js"></script>
    <script type="text/javascript" src="./components/uplaodfiles.js"></script>
    <script type="text/javascript" src="./lib/inchlib-1.2.0.js"></script>
    <script type="text/javascript" src="./components/drawmap.js"></script>
    <script type="text/javascript" src="./components/index.js"></script>
    <script type="text/javascript" src="./components/forms.js"></script>
    <script type="text/javascript" src="./components/twotablesprocess.js"></script>
    <script type="text/javascript" src="./components/datamaniuplation.js"></script>
    <script type="text/javascript" src="./components/deseq.js"></script>
 </html>    


 
 